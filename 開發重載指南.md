# 開發時快速重載指南

## 🚀 現在已啟用自動重載！

### ✅ 已完成的優化
修改了 `web_app.py`：`debug=False` → `debug=True`

## 📝 什麼時候需要重啟？什麼時候不需要？

### ❌ **不需要重啟** 的情況

#### 1. HTML/CSS/JavaScript 修改
- ✅ 修改 `templates/*.html`
- ✅ 修改 `static/style.css`
- ✅ 修改 `static/script.js`

**做法：只需刷新瀏覽器**
```
方法 1: Ctrl + Shift + R (硬重新整理，推薦)
方法 2: Ctrl + F5
方法 3: F12 → Network → 勾選 "Disable cache" → 普通刷新
```

#### 2. Python 後端代碼修改（現在！）
- ✅ 修改 `web_app.py`
- ✅ 修改 `candy_detector/` 模組
- ✅ 添加新的路由或 API

**做法：儲存檔案，等待 2-3 秒**
- Flask 會自動偵測檔案變化
- 控制台會顯示：
  ```
  * Detected change in 'web_app.py', reloading
  * Restarting with stat
  ```
- **不需要手動重啟！**

### ⚠️ **需要重啟** 的情況

只有這些情況需要手動重啟：

1. **修改 `config.ini`** - 配置檔案只在啟動時讀取
2. **安裝新的 Python 套件** - 需要重新載入依賴
3. **環境變數變更** - 需要新的進程
4. **Debug 模式切換** - 從 False 改 True 後第一次需要重啟

## 🎯 最佳開發工作流程

### 開發前端（HTML/CSS/JS）
```bash
# 1. 啟動伺服器（只需一次）
start_web_app.bat

# 2. 開啟瀏覽器
http://localhost:5000

# 3. 修改程式碼
編輯 static/script.js 或 static/style.css

# 4. 看結果
按 Ctrl + Shift + R 重新整理瀏覽器
```

### 開發後端（Python）
```bash
# 1. 啟動伺服器（只需一次）
start_web_app.bat

# 2. 修改程式碼
編輯 web_app.py

# 3. 儲存檔案
Ctrl + S

# 4. 等待自動重載（2-3秒）
看控制台出現 "Restarting with stat"

# 5. 刷新瀏覽器測試
按 F5 即可（不需要硬重新整理）
```

## 🔍 如何確認自動重載是否啟用？

啟動 `start_web_app.bat` 後，檢查控制台輸出：

```
 * Serving Flask app 'web_app'
 * Debug mode: on        ← 看到這個就對了！
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.x.x:5000
```

看到 `Debug mode: on` 就表示自動重載已啟用！

## ⚡ 提升開發效率的技巧

### 1. 使用瀏覽器開發者工具
- 按 **F12** 開啟
- **Console** 標籤：查看 JavaScript 錯誤和 console.log
- **Network** 標籤：查看 API 請求和響應
- **Elements** 標籤：即時修改 CSS 測試效果

### 2. 禁用瀏覽器快取（開發時）
1. 按 F12 打開開發者工具
2. 切換到 **Network** 標籤
3. 勾選 **Disable cache**
4. 保持開發者工具開啟

這樣每次刷新都會重新載入，不需要按 Ctrl + Shift + R

### 3. 使用多個瀏覽器窗口
- 一個顯示網頁
- 一個用於查看控制台（F12）
- 修改後可以立即看到效果

## 📊 常見問題

**Q: 修改 CSS 後看不到變化？**
- A: 按 Ctrl + Shift + R 強制刷新，清除快取

**Q: 修改 Python 後沒自動重載？**
- A: 檢查控制台是否顯示 "Debug mode: on"
- A: 確認檔案已儲存（Ctrl + S）
- A: 等待 2-3 秒，看控制台訊息

**Q: 控制台出現錯誤怎麼辦？**
- A: 檢查 Python 語法錯誤
- A: Flask 會顯示詳細錯誤訊息
- A: 修正錯誤後會自動重新載入

## 🎉 總結

**從現在開始：**
- ✅ 前端修改：只需刷新瀏覽器（Ctrl + Shift + R）
- ✅ 後端修改：只需儲存檔案，等待 2-3 秒自動重載
- ❌ 不需要每次都重啟 `start_web_app.bat`！

**享受高效的開發體驗！** 🚀
